ğŸš¨ URGENT CRITICAL FIX PROMPT â€” RANDOM BLANK PAGE ISSUE (AaRa)
ABSOLUTE PRIORITY â€” READ FIRST

STOP all feature development immediately.

You are working on AaRa, a health-critical, user-facing application.

The app is currently UNUSABLE due to random blank pages appearing when users click buttons.

This is a SEV-1 CRITICAL FAILURE.

âŒ No new features
âŒ No UI polish
âŒ No refactors
âŒ No assumptions

Your ONLY goal is to ELIMINATE ALL BLANK PAGES and make the app state-safe and non-breakable.

PROBLEM STATEMENT (CONFIRMED)

Observed behavior:

Clicking various buttons (meal regenerate, navigation, progress, back, etc.)

App redirects to a blank / white page

No error message

No fallback UI

User is stuck

This happens randomly, not tied to one feature.

This indicates:
ğŸ‘‰ Broken navigation guards
ğŸ‘‰ Undefined / null state rendering
ğŸ‘‰ Routes loading without required data
ğŸ‘‰ Silent runtime errors

NON-NEGOTIABLE RULE

A BLANK PAGE MUST NEVER OCCUR â€” UNDER ANY CIRCUMSTANCE.

If data is missing, invalid, or blocked:
ğŸ‘‰ Show an error screen
ğŸ‘‰ OR show an empty state
ğŸ‘‰ OR stay on the same page

But NEVER render nothing.

YOUR TASK (DO NOT SKIP STEPS)
1ï¸âƒ£ GLOBAL FLOW TRACE (MANDATORY)

Trace the app end-to-end:

App initialization

Global state provider

Router / navigation system

Page-level guards

Button click handlers

API calls

Async responses

Page rendering conditions

You must identify:

Where a route is being rendered with undefined / null / empty state.

2ï¸âƒ£ IDENTIFY ROOT CAUSE (NO GUESSING)

You must explicitly check and report:

âŒ Route navigation before data is ready

âŒ Pages that assume data exists

âŒ Conditional rendering like if (!data) return null

âŒ Unhandled promise rejections

âŒ API calls failing silently

âŒ Global state being reset or lost

âŒ Navigation to routes without required params

âŒ Missing default state initialization

You must state clearly:

â€œBlank pages occur because ________.â€

3ï¸âƒ£ APPLY A GLOBAL FIX STRATEGY (REQUIRED)

You must implement ALL of the following:

âœ… A. GLOBAL ERROR BOUNDARY / SAFETY WRAPPER

Every screen MUST be wrapped in a safety layer that:

Catches render errors

Prevents white screens

Displays a fallback UI

Example behavior (conceptual):

â€œSomething didnâ€™t load correctly. Weâ€™re fixing it.â€

âŒ No silent failures

âœ… B. ROUTE GUARDS FOR ALL PAGES

Before navigating to ANY page:

Validate required data exists

If missing:

DO NOT navigate

Show explanation

Provide retry

âŒ No route should render without validated state.

âœ… C. LOADING & EMPTY STATES (MANDATORY)

For every async action:

Show loading indicator

On failure:

Show error message

Keep user on same screen

âŒ Never redirect to an empty page.

âœ… D. DEFAULT STATE INITIALIZATION

All pages must have:

Safe default state

No reliance on previous navigation

No assumptions that API already ran

If data isnâ€™t ready:
ğŸ‘‰ Render a placeholder UI, NOT nothing.

4ï¸âƒ£ ADD DEBUG LOGGING (TEMPORARY BUT REQUIRED)

Add logs for:

Button clicks

Route changes

API responses

Rendering failures

State resets

These logs are for diagnosis, not users.

5ï¸âƒ£ VALIDATE FIX (MANDATORY CHECKLIST)

You must confirm:

â˜‘ Clicking any button NEVER shows a blank page
â˜‘ Every page has loading + error + empty states
â˜‘ Navigation only happens with valid state
â˜‘ Errors are visible, not silent
â˜‘ App is usable even when backend fails

OUTPUT REQUIRED FROM YOU

You must return:

Exact root cause

Screens/routes affected

What guardrails were added

How blank pages are now impossible

Confirmation that no safety logic was bypassed

âŒ Do NOT say â€œshould be fixedâ€
âŒ Do NOT say â€œtry thisâ€
âŒ Do NOT ship partial fixes

FINAL WARNING (IMPORTANT)

This app is health-critical.

A blank page:

breaks trust

breaks safety

blocks users mid-flow

is unacceptable

If something fails:
ğŸ‘‰ FAIL LOUDLY
ğŸ‘‰ FAIL SAFELY
ğŸ‘‰ NEVER FAIL SILENTLY